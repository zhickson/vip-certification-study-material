# 6.37 Intermittent/Difficult-to-Reproduce Bugs - Study Notes

## Overview

Capturing and reproducing rare issues involves using logging to capture intermittent behavior, applying traffic/session recording, and analyzing patterns across requests.

**Key Reference:** [Custom Logs - Section 6.19](./6.19-custom-logs.md) | [APM Tools - Section 6.5](./6.5-apm-tools.md)

---

## 1. Using Logging to Capture Intermittent Behavior

### Comprehensive Logging

**Log All Context:**
```php
function log_intermittent_issue( $context ) {
    $log_data = array(
        'timestamp' => time(),
        'user_id' => get_current_user_id(),
        'request_uri' => $_SERVER['REQUEST_URI'],
        'user_agent' => $_SERVER['HTTP_USER_AGENT'],
        'context' => $context,
        'memory' => memory_get_usage(),
        'queries' => get_num_queries(),
    );

    error_log( 'Intermittent issue: ' . print_r( $log_data, true ) );
}
```

### Conditional Logging

**Log on Specific Conditions:**
```php
if ( $unusual_condition ) {
    log_intermittent_issue( $context );
}
```

---

## 2. Applying Traffic/Session Recording

### Session Recording

**Record User Sessions:**
- Use APM tools
- Record full sessions
- Capture interactions
- Replay sessions

### Traffic Analysis

**Monitor Patterns:**
- Track request patterns
- Identify correlations
- Analyze timing
- Find triggers

---

## 3. Analyzing Patterns Across Requests

### Pattern Analysis

**Look For:**
- Common user actions
- Specific conditions
- Timing patterns
- Resource states

### Correlation

**Find Correlations:**
- User attributes
- Request patterns
- System state
- External factors

---

## Exam Tips

### Key Points to Remember

1. **Logging:**
   - Comprehensive context
   - Conditional logging
   - Capture all relevant data

2. **Recording:**
   - Session recording
   - Traffic analysis
   - APM tools

3. **Analysis:**
   - Pattern identification
   - Correlation analysis
   - Root cause finding

---

## Additional Resources

- [Custom Logs - Section 6.19](./6.19-custom-logs.md)
- [APM Tools - Section 6.5](./6.5-apm-tools.md)
