# 6.28 Debugging Object Cache Issues - Study Notes

## Overview

Debugging object cache issues involves inspecting cache groups and keys, debugging persistent cache backends, and resolving cache invalidation problems.

**Key Reference:** [Object Cache - WordPress Codex](https://codex.wordpress.org/Class_Reference/WP_Object_Cache)

---

## 1. Inspecting Cache Groups and Keys

### Cache Inspection

**Check Cache:**
```php
global $wp_object_cache;

// Check if cache is enabled
if ( wp_using_ext_object_cache() ) {
    // Cache is enabled
}

// Get cache stats
$stats = wp_cache_get_stats();
```

**Inspect Keys:**
```php
// Get cache value
$value = wp_cache_get( 'key', 'group' );

// Check if cached
$cached = wp_cache_get( 'key', 'group' );
if ( false === $cached ) {
    // Not cached
}
```

---

## 2. Debugging Persistent Cache Backends

### Redis

**Check Connection:**
```bash
redis-cli ping
```

**Inspect Keys:**
```bash
redis-cli keys "*"
```

### Memcached

**Check Status:**
```bash
echo "stats" | nc localhost 11211
```

---

## 3. Resolving Cache Invalidation Issues

### Invalidation

**Clear Cache:**
```php
// Clear specific key
wp_cache_delete( 'key', 'group' );

// Clear group
wp_cache_flush_group( 'group' );

// Clear all
wp_cache_flush();
```

**Debug Invalidation:**
```php
// Log cache operations
add_action( 'wp_cache_delete', function( $key, $group ) {
    error_log( "Cache deleted: {$group}:{$key}" );
}, 10, 2 );
```

---

## Exam Tips

### Key Points to Remember

1. **Cache Inspection:**
   - Check if enabled
   - Inspect keys
   - View stats

2. **Backends:**
   - Redis
   - Memcached
   - Check connections

3. **Invalidation:**
   - Clear specific keys
   - Clear groups
   - Debug operations

---

## Additional Resources

- [Object Cache - WordPress Codex](https://codex.wordpress.org/Class_Reference/WP_Object_Cache)
- [Redis Documentation](https://redis.io/docs/)
- [Memcached Documentation](https://memcached.org/)
