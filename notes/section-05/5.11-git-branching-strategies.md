# 5.11 Git Branching Strategies - Study Notes

## Overview

Git branching strategies define how teams collaborate on code, manage releases, and handle hotfixes. Choosing the right strategy depends on team size, release frequency, and project requirements.

**Key Reference:** [Git Branching - Git Documentation](https://git-scm.com/book/en/v2/Git-Branching-Branching-Workflows)

---

## 1. Git Flow

### Overview

Git Flow uses multiple branch types for different purposes:
- **main:** Production-ready code
- **develop:** Integration branch for features
- **feature/:** New features
- **release/:** Preparing releases
- **hotfix/:** Urgent production fixes

### Branch Structure

```
main (production)
  │
  ├── develop (integration)
  │     │
  │     ├── feature/user-login
  │     ├── feature/payment-gateway
  │     └── feature/search
  │
  ├── release/1.2.0
  └── hotfix/critical-bug
```

### Workflow

```bash
# Start new feature
git checkout develop
git pull origin develop
git checkout -b feature/new-feature

# Work on feature
git add .
git commit -m "Add new feature"
git push origin feature/new-feature

# Merge to develop
git checkout develop
git merge --no-ff feature/new-feature
git push origin develop

# Create release
git checkout -b release/1.2.0 develop
# Fix bugs, update version
git commit -m "Bump version to 1.2.0"
git checkout main
git merge --no-ff release/1.2.0
git tag -a v1.2.0 -m "Release version 1.2.0"
git checkout develop
git merge --no-ff release/1.2.0

# Hotfix
git checkout -b hotfix/critical-bug main
# Fix bug
git commit -m "Fix critical bug"
git checkout main
git merge --no-ff hotfix/critical-bug
git tag -a v1.2.1 -m "Hotfix version 1.2.1"
git checkout develop
git merge --no-ff hotfix/critical-bug
```

### When to Use

- Multiple release versions
- Complex release process
- Need for hotfixes
- Large teams

---

## 2. Trunk-Based Development

### Overview

Trunk-based development keeps the main branch always deployable. Features are developed in short-lived branches and merged quickly.

### Branch Structure

```
main (always deployable)
  │
  ├── feature/user-login (short-lived)
  ├── feature/payment (short-lived)
  └── feature/search (short-lived)
```

### Workflow

```bash
# Start feature
git checkout main
git pull origin main
git checkout -b feature/new-feature

# Work on feature (keep it small)
git add .
git commit -m "Add feature"
git push origin feature/new-feature

# Merge quickly (within hours/days)
git checkout main
git pull origin main
git merge feature/new-feature
git push origin main

# Delete feature branch
git branch -d feature/new-feature
```

### When to Use

- Continuous deployment
- Small, frequent releases
- Small teams
- Fast iteration

---

## 3. Feature Branching

### Overview

Feature branching creates a branch for each feature, merged when complete. Simpler than Git Flow, suitable for most teams.

### Branch Structure

```
main (production)
  │
  ├── feature/user-login
  ├── feature/payment-gateway
  └── feature/search
```

### Workflow

```bash
# Create feature branch
git checkout main
git pull origin main
git checkout -b feature/new-feature

# Develop feature
git add .
git commit -m "Add feature"
git push origin feature/new-feature

# Create pull request
# After review and approval:
git checkout main
git pull origin main
git merge feature/new-feature
git push origin main

# Delete feature branch
git branch -d feature/new-feature
git push origin --delete feature/new-feature
```

### When to Use

- Most WordPress projects
- Code review required
- Medium-sized teams
- Regular releases

---

## 4. Release Branches

### Purpose

Release branches prepare a new production release. They allow for:
- Final bug fixes
- Version number updates
- Release documentation
- Final testing

### Workflow

```bash
# Create release branch from develop
git checkout develop
git pull origin develop
git checkout -b release/1.2.0

# Prepare release
# - Update version numbers
# - Update changelog
# - Fix release-blocking bugs
git commit -m "Bump version to 1.2.0"
git commit -m "Fix release bug"

# Merge to main and tag
git checkout main
git merge --no-ff release/1.2.0
git tag -a v1.2.0 -m "Release version 1.2.0"
git push origin main --tags

# Merge back to develop
git checkout develop
git merge --no-ff release/1.2.0
git push origin develop

# Delete release branch
git branch -d release/1.2.0
```

---

## 5. Hotfix Branches

### Purpose

Hotfix branches address critical production issues that need immediate fixing.

### Workflow

```bash
# Create hotfix from main
git checkout main
git pull origin main
git checkout -b hotfix/critical-bug

# Fix the bug
git add .
git commit -m "Fix critical security bug"

# Merge to main
git checkout main
git merge --no-ff hotfix/critical-bug
git tag -a v1.2.1 -m "Hotfix version 1.2.1"
git push origin main --tags

# Merge to develop
git checkout develop
git merge --no-ff hotfix/critical-bug
git push origin develop

# Delete hotfix branch
git branch -d hotfix/critical-bug
```

---

## 6. Choosing Strategies Based on Team/Project Needs

### Small Teams (1-3 developers)

**Recommended:** Trunk-based or Feature Branching

```bash
# Simple workflow
main
  ├── feature/quick-fix
  └── feature/small-feature
```

### Medium Teams (4-10 developers)

**Recommended:** Feature Branching with Release Branches

```bash
main
  ├── develop
  │     ├── feature/feature-1
  │     └── feature/feature-2
  └── release/1.2.0
```

### Large Teams (10+ developers)

**Recommended:** Git Flow

```bash
main
  ├── develop
  │     ├── feature/feature-1
  │     ├── feature/feature-2
  │     └── feature/feature-3
  ├── release/1.2.0
  └── hotfix/critical
```

### Continuous Deployment

**Recommended:** Trunk-Based Development

- Small, frequent commits
- Fast merges
- Always deployable main branch

---

## 7. Maintaining Release and Hotfix Branches

### Release Branch Maintenance

```bash
# Keep release branch updated
git checkout release/1.2.0
git merge main  # If needed
git push origin release/1.2.0

# Finalize release
git checkout release/1.2.0
# Final testing
# Update documentation
git commit -m "Finalize release 1.2.0"
```

### Hotfix Branch Best Practices

```bash
# Hotfix should be minimal
# Only fix the critical issue
# Test thoroughly before merging
# Merge to both main and develop
```

---

## 8. Avoiding Long-Lived Divergent Branches

### Problem

Long-lived branches cause:
- Merge conflicts
- Integration issues
- Delayed feedback
- Technical debt

### Solutions

```bash
# Keep branches short-lived
# Merge frequently
# Rebase regularly
git checkout feature/branch
git rebase main
git push origin feature/branch --force-with-lease

# Break large features into smaller ones
feature/user-authentication
  ├── feature/user-login
  ├── feature/user-registration
  └── feature/password-reset
```

### Regular Integration

```bash
# Regularly merge main into feature branch
git checkout feature/long-feature
git merge main
# Resolve conflicts early
git push origin feature/long-feature
```

---

## Exam Tips

### Key Points to Remember

1. **Git Flow:**
   - Multiple branch types
   - Release and hotfix branches
   - Good for large teams

2. **Trunk-Based:**
   - Simple, fast
   - Short-lived branches
   - Good for continuous deployment

3. **Feature Branching:**
   - One branch per feature
   - Most common approach
   - Good for code review

4. **Release Branches:**
   - Prepare releases
   - Final bug fixes
   - Version updates

5. **Hotfix Branches:**
   - Critical production fixes
   - Merge to main and develop
   - Keep minimal

6. **Best Practices:**
   - Avoid long-lived branches
   - Merge frequently
   - Keep branches small
   - Regular integration

---

## Additional Resources

- [Git Branching - Git Documentation](https://git-scm.com/book/en/v2/Git-Branching-Branching-Workflows)
- [Git Flow](https://nvie.com/posts/a-successful-git-branching-model/)
- [Trunk-Based Development](https://trunkbaseddevelopment.com/)
- [GitHub Flow](https://guides.github.com/introduction/flow/)
