# 5.12 Managing WordPress Projects in Git - Study Notes

## Overview

Structuring WordPress repositories for collaborative development requires careful consideration of what to include, how to organize files, and how to support multi-team workflows.

**Key Reference:** [WordPress and Git - WordPress Developer Resources](https://developer.wordpress.org/advanced-administration/deployment/version-control/)

---

## 1. Organizing Repositories

### Plugin Repository Structure

```
my-plugin/
├── .gitignore
├── .gitattributes
├── composer.json
├── package.json
├── README.md
├── CHANGELOG.md
├── my-plugin.php
├── includes/
│   ├── class-plugin-core.php
│   ├── class-admin.php
│   └── class-public.php
├── admin/
│   └── class-settings.php
├── public/
│   └── class-frontend.php
├── assets/
│   ├── css/
│   ├── js/
│   └── images/
├── languages/
├── tests/
│   └── phpunit/
└── vendor/ (excluded)
```

### Theme Repository Structure

```
my-theme/
├── .gitignore
├── style.css
├── functions.php
├── index.php
├── screenshot.png
├── inc/
│   ├── template-functions.php
│   ├── customizer.php
│   └── template-tags.php
├── template-parts/
├── assets/
│   ├── css/
│   ├── js/
│   └── images/
├── languages/
└── node_modules/ (excluded)
```

### Monorepo Structure

```
wordpress-project/
├── .gitignore
├── composer.json
├── package.json
├── plugins/
│   ├── plugin-a/
│   └── plugin-b/
├── themes/
│   ├── theme-a/
│   └── theme-b/
├── mu-plugins/
│   └── custom-functions.php
└── wp-content/ (symlink or separate)
```

---

## 2. .gitignore Configuration

### Standard WordPress .gitignore

```gitignore
# WordPress core (if not tracking)
wordpress/
wp-admin/
wp-includes/
wp-*.php
xmlrpc.php
license.txt
readme.html

# WordPress content
wp-content/uploads/
wp-content/upgrade/
wp-content/backup-db/
wp-content/advanced-cache.php
wp-content/wp-cache-config.php
wp-content/cache/
wp-content/cache/supercache/

# Configuration
wp-config.php
wp-config-local.php
.env
.env.*
!.env.example
secrets.php

# Dependencies
vendor/
node_modules/
composer.lock (optional)

# IDE
.idea/
.vscode/
*.swp
*.swo
*~

# OS
.DS_Store
Thumbs.db

# Logs
*.log
error_log
debug.log

# Temporary files
*.tmp
*.temp
```

### Plugin-Specific .gitignore

```gitignore
# Plugin .gitignore
vendor/
node_modules/
*.log
.DS_Store
.idea/
.env
.env.*
!.env.example
tests/coverage/
```

---

## 3. Using Submodules

### When to Use Submodules

- Sharing code between projects
- Including third-party libraries
- Managing WordPress core separately

### Adding Submodules

```bash
# Add WordPress core as submodule
git submodule add https://github.com/WordPress/WordPress.git wordpress

# Add shared plugin
git submodule add https://github.com/user/shared-plugin.git wp-content/plugins/shared-plugin

# Initialize submodules
git submodule init
git submodule update

# Or clone with submodules
git clone --recursive https://github.com/user/project.git
```

### Updating Submodules

```bash
# Update all submodules
git submodule update --remote

# Update specific submodule
git submodule update --remote wordpress

# Commit submodule updates
git add wordpress
git commit -m "Update WordPress core to 6.2"
```

### Submodule Best Practices

```bash
# .gitmodules file
[submodule "wordpress"]
	path = wordpress
	url = https://github.com/WordPress/WordPress.git
	branch = 6.2

[submodule "shared-plugin"]
	path = wp-content/plugins/shared-plugin
	url = https://github.com/user/shared-plugin.git
```

---

## 4. Using Subtrees

### When to Use Subtrees

- Simpler than submodules
- Need to modify included code
- Want code in main repository

### Adding Subtrees

```bash
# Add WordPress core as subtree
git subtree add --prefix=wordpress \
  https://github.com/WordPress/WordPress.git \
  6.2 --squash

# Add shared plugin
git subtree add --prefix=wp-content/plugins/shared-plugin \
  https://github.com/user/shared-plugin.git \
  main --squash
```

### Updating Subtrees

```bash
# Pull updates from subtree
git subtree pull --prefix=wordpress \
  https://github.com/WordPress/WordPress.git \
  6.2 --squash

# Push changes to subtree
git subtree push --prefix=wp-content/plugins/shared-plugin \
  https://github.com/user/shared-plugin.git \
  main
```

---

## 5. Supporting Multi-Team Workflows

### Branch Protection

```yaml
# GitHub branch protection rules
# Settings → Branches → Add rule

Branch name pattern: main
- Require pull request reviews
- Require status checks to pass
- Require branches to be up to date
- Include administrators
```

### Code Review Process

```markdown
# Pull Request Template

## Description
Brief description of changes

## Type of Change
- [ ] Bug fix
- [ ] New feature
- [ ] Breaking change
- [ ] Documentation update

## Testing
- [ ] Unit tests added/updated
- [ ] Integration tests pass
- [ ] Manual testing completed

## Checklist
- [ ] Code follows WordPress standards
- [ ] Documentation updated
- [ ] No security issues
```

### Team-Specific Branches

```bash
# Team A
team-a/feature/user-authentication

# Team B
team-b/feature/payment-gateway

# Integration
develop (merged from team branches)
```

---

## 6. Standardizing Repository Structure

### Common Structure Template

```bash
# Create standard structure
mkdir -p {includes,admin,public,assets/{css,js,images},tests,languages}

# Standard file organization
# - includes/: Core functionality
# - admin/: Admin-specific code
# - public/: Frontend code
# - assets/: CSS, JS, images
# - tests/: Test files
# - languages/: Translation files
```

### Naming Conventions

```php
// Files: kebab-case
class-admin-settings.php
class-public-frontend.php

// Classes: PascalCase
class Admin_Settings {}
class Public_Frontend {}

// Functions: snake_case
function my_plugin_get_option() {}
function my_plugin_save_data() {}
```

### Documentation Standards

```markdown
# README.md Template

# Plugin/Theme Name

## Description
Brief description

## Installation
Installation instructions

## Configuration
Configuration options

## Development
Development setup

## Contributing
Contribution guidelines

## License
License information
```

---

## 7. Best Practices

### Repository Size Management

```bash
# Exclude large files
# Use Git LFS for large assets
git lfs track "*.psd"
git lfs track "*.mov"
git lfs track "*.zip"

# Clean up history if needed
git filter-branch --tree-filter 'rm -f large-file.zip' HEAD
```

### Commit Message Standards

```bash
# Conventional commits
feat: Add user authentication
fix: Resolve login bug
docs: Update README
style: Format code
refactor: Restructure admin code
test: Add unit tests
chore: Update dependencies
```

### Tagging Releases

```bash
# Semantic versioning
git tag -a v1.2.3 -m "Release version 1.2.3"
git push origin v1.2.3

# Create release notes
git log v1.2.2..v1.2.3 --oneline
```

---

## Exam Tips

### Key Points to Remember

1. **Repository Structure:**
   - Organize by functionality
   - Separate admin/public code
   - Include tests directory

2. **.gitignore:**
   - Exclude WordPress core (usually)
   - Exclude uploads and cache
   - Exclude configuration files
   - Exclude dependencies (vendor, node_modules)

3. **Submodules vs Subtrees:**
   - Submodules: External dependencies
   - Subtrees: Simpler, code in main repo

4. **Multi-Team Workflows:**
   - Branch protection
   - Code review process
   - Team-specific branches

5. **Standardization:**
   - Consistent structure
   - Naming conventions
   - Documentation standards

---

## Additional Resources

- [WordPress and Git - WordPress Developer Resources](https://developer.wordpress.org/advanced-administration/deployment/version-control/)
- [Git Submodules](https://git-scm.com/book/en/v2/Git-Tools-Submodules)
- [Git Subtrees](https://www.atlassian.com/git/tutorials/git-subtree)
- [Git Best Practices](https://www.atlassian.com/git/tutorials/comparing-workflows)
