# 2.4 WordPress Standards - Study Notes

## Overview

WordPress coding standards ensure consistency, readability, and maintainability across the WordPress ecosystem. This section covers PHP, JavaScript, CSS, and accessibility standards, along with tooling like PHPCS for enforcement.

**Key Reference:** [WordPress Coding Standards - WordPress Developer Resources](https://developer.wordpress.org/coding-standards/wordpress-coding-standards/)

---

## 1. Follow Coding Standards for PHP, JavaScript, CSS, and Accessibility

### PHP Coding Standards

**Key Principles:**

1. **Indentation:** Use tabs (not spaces) for indentation
2. **Naming:** Use lowercase with underscores for functions/variables
3. **Brace Style:** Opening brace on same line
4. **Yoda Conditions:** Use Yoda conditions for comparisons
5. **No Shorthand PHP Tags:** Always use `<?php`, never `<?`

**Example - PHP Standards:**

```php
<?php
/**
 * Plugin Name: My Plugin
 * Description: Example plugin following WordPress standards
 * Version: 1.0.0
 */

// ✅ GOOD - Proper formatting
function my_plugin_function( $param1, $param2 = '' ) {
	if ( true === $param1 ) {
		return $param2;
	}

	return '';
}

// ❌ BAD - Wrong indentation, no Yoda condition
function my_plugin_function($param1, $param2 = '') {
	if ($param1 == true) {
	return $param2;
	}
	return '';
}
```

**Naming Conventions:**

```php
// Functions: lowercase_with_underscores
function my_plugin_get_data() {}

// Classes: Capitalized_Words
class My_Plugin_Admin {}

// Constants: UPPERCASE_WITH_UNDERSCORES
define( 'MY_PLUGIN_VERSION', '1.0.0' );

// Variables: lowercase_with_underscores
$my_variable = 'value';

// Arrays: descriptive names
$user_data = array();
$post_ids = array();
```

**Yoda Conditions:**

```php
// ✅ GOOD - Yoda condition
if ( true === $value ) {
	// ...
}

if ( 'admin' === $role ) {
	// ...
}

// ❌ BAD - Normal condition
if ( $value == true ) {
	// ...
}
```

**Reference:** [PHP Coding Standards - WordPress Developer Resources](https://developer.wordpress.org/coding-standards/wordpress-coding-standards/php/)

### JavaScript Coding Standards

**Key Principles:**

1. **Indentation:** Use tabs
2. **Spacing:** Use spaces around operators
3. **Quotes:** Use single quotes
4. **Semicolons:** Always use semicolons
5. **jQuery:** Use `$` for jQuery, cache selectors

**Example - JavaScript Standards:**

```javascript
// ✅ GOOD - Proper formatting
(function( $ ) {
	'use strict';

	var myPlugin = {
		init: function() {
			this.bindEvents();
		},

		bindEvents: function() {
			$( document ).on( 'click', '.my-button', this.handleClick );
		},

		handleClick: function( e ) {
			e.preventDefault();
			var $button = $( this );
			$button.addClass( 'clicked' );
		}
	};

	$( document ).ready( function() {
		myPlugin.init();
	});
})( jQuery );

// ❌ BAD - Wrong formatting
(function($){
	var myPlugin={
		init:function(){
			this.bindEvents()
		},
		bindEvents:function(){
			$(document).on("click",".my-button",this.handleClick)
		}
	}
	$(document).ready(function(){myPlugin.init()})
})(jQuery)
```

**Reference:** [JavaScript Coding Standards - WordPress Developer Resources](https://developer.wordpress.org/coding-standards/wordpress-coding-standards/javascript/)

### CSS Coding Standards

**Key Principles:**

1. **Indentation:** Use tabs
2. **Selectors:** One per line, indented
3. **Properties:** One per line, indented
4. **Values:** Space after colon
5. **Closing Brace:** On new line

**Example - CSS Standards:**

```css
/* ✅ GOOD - Proper formatting */
.selector-one,
.selector-two,
.selector-three {
	background: #fff;
	color: #000;
	margin: 0;
	padding: 10px;
}

/* ❌ BAD - Wrong formatting */
.selector-one, .selector-two {background:#fff;color:#000;margin:0;padding:10px}
```

**Reference:** [CSS Coding Standards - WordPress Developer Resources](https://developer.wordpress.org/coding-standards/wordpress-coding-standards/css/)

### Accessibility Standards

**Key Principles:**

1. **Semantic HTML:** Use proper HTML elements
2. **ARIA Attributes:** Use when needed for screen readers
3. **Keyboard Navigation:** Ensure all functionality is keyboard accessible
4. **Color Contrast:** Meet WCAG contrast requirements
5. **Alt Text:** Provide alt text for images

**Example - Accessibility:**

```php
// ✅ GOOD - Accessible form
?>
<form>
	<label for="username">
		<?php esc_html_e( 'Username', 'my-plugin' ); ?>
	</label>
	<input
		type="text"
		id="username"
		name="username"
		required
		aria-required="true"
		aria-describedby="username-description"
	/>
	<span id="username-description" class="screen-reader-text">
		<?php esc_html_e( 'Enter your username', 'my-plugin' ); ?>
	</span>
</form>
<?php

// ✅ GOOD - Accessible button
?>
<button
	type="button"
	aria-label="<?php esc_attr_e( 'Close dialog', 'my-plugin' ); ?>"
	class="close-button"
>
	<span class="screen-reader-text">
		<?php esc_html_e( 'Close', 'my-plugin' ); ?>
	</span>
	<span aria-hidden="true">×</span>
</button>
<?php
```

**Screen Reader Text:**

```css
.screen-reader-text {
	border: 0;
	clip: rect(1px, 1px, 1px, 1px);
	clip-path: inset(50%);
	height: 1px;
	margin: -1px;
	overflow: hidden;
	padding: 0;
	position: absolute !important;
	width: 1px;
	word-wrap: normal !important;
}
```

**Reference:** [Accessibility Handbook - WordPress Developer Resources](https://developer.wordpress.org/advanced-administration/wordpress/accessibility/)

---

## 2. Use PHPCS and Other Tooling to Enforce Consistency

### PHPCS (PHP CodeSniffer)

**Installation:**

```bash
# Install via Composer
composer require --dev wp-coding-standards/wpcs

# Install via PEAR
pear install PHP_CodeSniffer
```

**Configuration (.phpcs.xml):**

```xml
<?xml version="1.0"?>
<ruleset name="WordPress">
	<description>WordPress Coding Standards</description>

	<!-- Include WordPress standards -->
	<rule ref="WordPress"/>

	<!-- Exclude specific rules if needed -->
	<rule ref="WordPress.NamingConventions.ValidFunctionName.MethodNameInvalid">
		<severity>0</severity>
	</rule>

	<!-- File extensions -->
	<arg name="extensions" value="php"/>

	<!-- Ignore patterns -->
	<exclude-pattern>*/vendor/*</exclude-pattern>
	<exclude-pattern>*/node_modules/*</exclude-pattern>
</ruleset>
```

**Running PHPCS:**

```bash
# Check specific file
phpcs my-plugin.php

# Check directory
phpcs /path/to/plugin/

# Auto-fix issues (phpcbf)
phpcbf my-plugin.php
```

**WordPress-Specific Rules:**

```bash
# Use WordPress standards
phpcs --standard=WordPress my-plugin.php

# Use WordPress-Extra (includes WordPress + extra rules)
phpcs --standard=WordPress-Extra my-plugin.php

# Use WordPress-Core (strictest)
phpcs --standard=WordPress-Core my-plugin.php
```

### ESLint for JavaScript

**Configuration (.eslintrc.js):**

```javascript
module.exports = {
	extends: [
		'wordpress',
	],
	env: {
		browser: true,
		jquery: true,
	},
	rules: {
		// Custom rules
	},
};
```

**Running ESLint:**

```bash
# Check files
eslint js/*.js

# Auto-fix
eslint --fix js/*.js
```

### Stylelint for CSS

**Configuration (.stylelintrc.json):**

```json
{
	"extends": [
		"stylelint-config-wordpress"
	],
	"rules": {
		// Custom rules
	}
}
```

**Running Stylelint:**

```bash
# Check files
stylelint css/*.css

# Auto-fix
stylelint --fix css/*.css
```

### Pre-commit Hooks

**Using Husky:**

```json
{
	"scripts": {
		"lint:php": "phpcs .",
		"lint:js": "eslint js/",
		"lint:css": "stylelint css/",
		"lint": "npm run lint:php && npm run lint:js && npm run lint:css"
	}
}
```

---

## 3. Write Maintainable, Readable, and Community-Compliant Code

### Code Organization

**File Structure:**

```
my-plugin/
├── my-plugin.php          # Main plugin file
├── includes/
│   ├── class-admin.php    # Admin functionality
│   ├── class-frontend.php # Frontend functionality
│   └── functions.php      # Helper functions
├── admin/
│   └── css/
│       └── admin.css
├── public/
│   ├── css/
│   │   └── public.css
│   └── js/
│       └── public.js
└── languages/
    └── my-plugin.pot
```

### Documentation

**PHPDoc Comments:**

```php
/**
 * Retrieves user data by ID.
 *
 * @since 1.0.0
 *
 * @param int    $user_id User ID.
 * @param string $field   Optional. Specific field to retrieve. Default empty.
 * @return array|string|false User data on success, false on failure.
 */
function my_plugin_get_user_data( $user_id, $field = '' ) {
	if ( ! is_numeric( $user_id ) ) {
		return false;
	}

	$user = get_userdata( $user_id );
	if ( ! $user ) {
		return false;
	}

	if ( ! empty( $field ) ) {
		return isset( $user->$field ) ? $user->$field : false;
	}

	return (array) $user;
}
```

**Inline Comments:**

```php
// ✅ GOOD - Explains why, not what
// Check user capability before processing to prevent unauthorized access
if ( ! current_user_can( 'edit_posts' ) ) {
	return;
}

// ❌ BAD - States the obvious
// Check if user can edit posts
if ( ! current_user_can( 'edit_posts' ) ) {
	return;
}
```

### Code Readability

**Meaningful Names:**

```php
// ✅ GOOD - Descriptive names
function get_user_posts_by_category( $user_id, $category_id ) {}

// ❌ BAD - Unclear names
function get_upbc( $uid, $cid ) {}
```

**Function Length:**

```php
// ✅ GOOD - Small, focused function
function validate_user_input( $input ) {
	if ( empty( $input ) ) {
		return false;
	}

	return sanitize_text_field( $input );
}

// ❌ BAD - Too long, does too much
function process_user_data( $data ) {
	// 100+ lines of code doing multiple things
}
```

**Early Returns:**

```php
// ✅ GOOD - Early returns reduce nesting
function process_post( $post_id ) {
	if ( ! is_numeric( $post_id ) ) {
		return false;
	}

	$post = get_post( $post_id );
	if ( ! $post ) {
		return false;
	}

	// Process post
	return true;
}

// ❌ BAD - Deep nesting
function process_post( $post_id ) {
	if ( is_numeric( $post_id ) ) {
		$post = get_post( $post_id );
		if ( $post ) {
			// Process post
			return true;
		}
	}
	return false;
}
```

### Security Best Practices

**Sanitize Input:**

```php
// ✅ GOOD - Sanitize all input
$name = sanitize_text_field( $_POST['name'] );
$email = sanitize_email( $_POST['email'] );
$url = esc_url_raw( $_POST['url'] );

// ❌ BAD - Unsanitized input
$name = $_POST['name'];
```

**Escape Output:**

```php
// ✅ GOOD - Escape all output
echo esc_html( $user_name );
echo esc_attr( $class_name );
echo esc_url( $link_url );

// ❌ BAD - Unescaped output
echo $user_name;
```

**Nonce Verification:**

```php
// ✅ GOOD - Verify nonce
if ( isset( $_POST['my_action'] ) ) {
	if ( ! wp_verify_nonce( $_POST['my_nonce'], 'my_action' ) ) {
		wp_die( 'Security check failed' );
	}
	// Process form
}

// ❌ BAD - No nonce check
if ( isset( $_POST['my_action'] ) ) {
	// Process form
}
```

---

## Exam Tips

### Key Points to Remember

1. **PHP Standards:**
   - Tabs for indentation
   - Lowercase with underscores for functions/variables
   - Yoda conditions
   - Opening brace on same line

2. **JavaScript Standards:**
   - Tabs for indentation
   - Single quotes
   - Always use semicolons
   - Cache jQuery selectors

3. **CSS Standards:**
   - Tabs for indentation
   - One selector/property per line
   - Space after colon

4. **Accessibility:**
   - Semantic HTML
   - ARIA attributes when needed
   - Keyboard navigation
   - Alt text for images

5. **Tooling:**
   - PHPCS for PHP
   - ESLint for JavaScript
   - Stylelint for CSS
   - Use in CI/CD pipelines

6. **Code Quality:**
   - Meaningful names
   - Small, focused functions
   - Early returns
   - Proper documentation
   - Security: sanitize input, escape output

---

## Additional Resources

- [WordPress Coding Standards - WordPress Developer Resources](https://developer.wordpress.org/coding-standards/wordpress-coding-standards/)
- [PHP Coding Standards - WordPress Developer Resources](https://developer.wordpress.org/coding-standards/wordpress-coding-standards/php/)
- [JavaScript Coding Standards - WordPress Developer Resources](https://developer.wordpress.org/coding-standards/wordpress-coding-standards/javascript/)
- [CSS Coding Standards - WordPress Developer Resources](https://developer.wordpress.org/coding-standards/wordpress-coding-standards/css/)
- [Accessibility Handbook - WordPress Developer Resources](https://developer.wordpress.org/advanced-administration/wordpress/accessibility/)
- [PHPCS Documentation](https://github.com/squizlabs/PHP_CodeSniffer)
- [WordPress PHPCS Rules](https://github.com/WordPress/WordPress-Coding-Standards)
