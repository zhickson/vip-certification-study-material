# 6.35 Options Table Performance Issues - Study Notes

## Overview

Debugging options table performance involves identifying large autoloaded values, auditing the options table for performance risks, and optimizing autoload usage.

**Key Reference:** [Auto-Loaded Options - Section 4.9](../section-04/4.9-auto-loaded-options.md) | [Options API - Section 1.3](../section-01/1.3-options-api.md)

---

## 1. Identifying Large Autoloaded Values

### Check Autoloaded Options

**SQL Query:**
```sql
SELECT
    option_name,
    LENGTH(option_value) AS size_bytes,
    ROUND(LENGTH(option_value) / 1024, 2) AS size_kb
FROM wp_options
WHERE autoload = 'yes'
ORDER BY size_bytes DESC
LIMIT 20;
```

**WP-CLI:**
```bash
wp option list --search="autoload" --format=table
```

### Large Values

**Common Large Options:**
- Theme mods
- Widget data
- Plugin settings
- Cached data

---

## 2. Auditing the Options Table for Performance Risks

### Performance Risks

**Issues:**
- Large autoloaded values
- Too many autoloaded options
- Serialized large arrays
- Unnecessary autoloading

### Audit Query

**Check Autoload Count:**
```sql
SELECT
    COUNT(*) AS autoload_count,
    SUM(LENGTH(option_value)) AS total_size
FROM wp_options
WHERE autoload = 'yes';
```

---

## 3. Optimizing Autoload Usage

### Disable Autoload

**For Large Options:**
```php
update_option( 'large_option', $value, 'no' );
```

**WP-CLI:**
```bash
wp option update large_option --autoload=no
```

### Best Practices

**Guidelines:**
- Only autoload small, frequently used options
- Don't autoload large serialized data
- Use transients for temporary data
- Regular audit and cleanup

---

## Exam Tips

### Key Points to Remember

1. **Large Values:**
   - Check option sizes
   - Identify large autoloaded
   - Monitor growth

2. **Auditing:**
   - Count autoloaded options
   - Check total size
   - Identify risks

3. **Optimization:**
   - Disable autoload for large options
   - Use transients
   - Regular cleanup

---

## Additional Resources

- [Auto-Loaded Options - Section 4.9](../section-04/4.9-auto-loaded-options.md)
- [Options API - Section 1.3](../section-01/1.3-options-api.md)
