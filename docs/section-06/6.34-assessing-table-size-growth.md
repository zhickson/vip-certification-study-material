# 6.34 Assessing Table Size and Growth - Study Notes

## Overview

Assessing table size and growth involves measuring table sizes and growth trends, diagnosing oversized log/meta tables, and planning cleanup or archiving strategies.

**Key Reference:** [WP-CLI Database Commands](https://wp-cli.org/commands/db/)

---

## 1. Measuring Table Sizes and Growth Trends

### Check Table Sizes

**SQL:**
```sql
SELECT
    table_name,
    ROUND(((data_length + index_length) / 1024 / 1024), 2) AS size_mb
FROM information_schema.tables
WHERE table_schema = 'database_name'
ORDER BY size_mb DESC;
```

**WP-CLI:**
```bash
wp db size
```

### Growth Trends

**Monitor Over Time:**
- Track sizes weekly
- Compare month-over-month
- Identify growth patterns
- Plan capacity

---

## 2. Diagnosing Oversized Log/Meta Tables

### Common Large Tables

**wp_postmeta:**
- Can grow very large
- Many plugins store data here
- Check for orphaned meta

**wp_options:**
- Autoloaded options
- Large serialized data
- Transients

**Log Tables:**
- Plugin log tables
- Audit tables
- Activity logs

### Check Large Tables

**Find Large Tables:**
```sql
SELECT
    table_name,
    ROUND(((data_length + index_length) / 1024 / 1024), 2) AS size_mb,
    table_rows
FROM information_schema.tables
WHERE table_schema = 'database_name'
ORDER BY size_mb DESC
LIMIT 10;
```

---

## 3. Planning Cleanup or Archiving Strategies

### Cleanup Strategies

**Delete Old Data:**
```sql
-- Delete old revisions
DELETE FROM wp_posts WHERE post_type = 'revision' AND post_date < DATE_SUB(NOW(), INTERVAL 30 DAY);
```

**Archive Data:**
- Move to archive tables
- Export to files
- Store in separate database

### Maintenance

**Regular Cleanup:**
- Schedule cleanup tasks
- Archive old data
- Optimize tables
- Monitor growth

---

## Exam Tips

### Key Points to Remember

1. **Table Sizes:**
   - Check with SQL
   - Monitor growth
   - Identify large tables

2. **Oversized Tables:**
   - wp_postmeta
   - wp_options
   - Log tables

3. **Strategies:**
   - Cleanup old data
   - Archive data
   - Regular maintenance

---

## Additional Resources

- [WP-CLI Database Commands](https://wp-cli.org/commands/db/)
- [MySQL Table Maintenance](https://dev.mysql.com/doc/refman/8.0/en/table-maintenance.html)
