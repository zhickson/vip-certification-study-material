# 6.41 Debugging REST API Requests - Study Notes

## Overview

Inspecting and debugging API calls in WordPress involves inspecting permissions and authentication, checking response codes and payloads, and tracing custom REST routes.

**Key Reference:** [REST API - Section 1.2](../section-01/1.2-rest-api-usage-customization.md) | [cURL - Section 6.9](./6.9-curl.md)

---

## 1. Inspecting Permissions and Authentication

### Check Authentication

**cURL:**
```bash
curl -u "username:application_password" \
  https://example.com/wp-json/wp/v2/users/me
```

**Response:**
- 200 OK = authenticated
- 401 Unauthorized = not authenticated

### Check Permissions

**Test Endpoint:**
```bash
curl https://example.com/wp-json/wp/v2/posts
```

**Check Capabilities:**
- Read permissions
- Write permissions
- Custom capabilities

---

## 2. Checking Response Codes and Payloads

### Response Codes

**Common Codes:**
- 200 OK
- 201 Created
- 400 Bad Request
- 401 Unauthorized
- 403 Forbidden
- 404 Not Found
- 500 Internal Server Error

### Payloads

**Check Response:**
```bash
curl -v https://example.com/wp-json/wp/v2/posts
```

**Validate JSON:**
- Check structure
- Verify data
- Check errors

---

## 3. Tracing Custom REST Routes

### Find Routes

**List Routes:**
```bash
curl https://example.com/wp-json/
```

**Custom Routes:**
- Check registration
- Verify endpoints
- Test routes

### Debug Custom Routes

**Add Logging:**
```php
add_filter( 'rest_pre_dispatch', function( $result, $server, $request ) {
    error_log( 'REST API: ' . $request->get_route() );
    return $result;
}, 10, 3 );
```

---

## Exam Tips

### Key Points to Remember

1. **Authentication:**
   - Application passwords
   - Bearer tokens
   - Cookie auth

2. **Response Codes:**
   - 200 = success
   - 401 = unauthorized
   - 403 = forbidden

3. **Tracing:**
   - List routes
   - Test endpoints
   - Debug custom routes

---

## Additional Resources

- [REST API - Section 1.2](../section-01/1.2-rest-api-usage-customization.md)
- [cURL - Section 6.9](./6.9-curl.md)
