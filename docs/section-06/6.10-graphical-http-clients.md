# 6.10 Graphical HTTP Clients (Postman, Insomnia) - Study Notes

## Overview

Graphical HTTP clients like Postman and Insomnia provide user-friendly interfaces for testing REST API endpoints, AJAX requests, and debugging HTTP interactions in WordPress development.

**Key Reference:** [Postman Documentation](https://learning.postman.com/) | [Insomnia Documentation](https://docs.insomnia.rest/)

---

## 1. Sending Custom REST or AJAX Requests

### Postman

**Create Request:**
1. Click "New" → "HTTP Request"
2. Select method (GET, POST, PUT, DELETE)
3. Enter URL
4. Click "Send"

**WordPress REST API Example:**
```
GET https://example.com/wp-json/wp/v2/posts
```

**AJAX Request:**
```
POST https://example.com/wp-admin/admin-ajax.php
Body: form-data
  action: my_action
  data: value
```

### Insomnia

**Create Request:**
1. Click "+" to create new request
2. Select method
3. Enter URL
4. Click "Send"

**Similar Interface:**
- Request builder
- Response viewer
- History tracking
- Environment variables

---

## 2. Modifying Headers, Tokens, and Payloads

### Headers

**Add Headers in Postman:**
- Go to "Headers" tab
- Add key-value pairs
- Common headers:
  - `Content-Type: application/json`
  - `Authorization: Bearer token`
  - `X-WP-Nonce: nonce123`

**Add Headers in Insomnia:**
- Click "Header" tab
- Add header name and value
- Auto-complete for common headers

### Authentication

**Postman Authentication:**
- Go to "Authorization" tab
- Select type:
  - Basic Auth
  - Bearer Token
  - OAuth 2.0
  - API Key

**WordPress Application Password:**
```
Type: Basic Auth
Username: wordpress_username
Password: application_password
```

**Bearer Token:**
```
Type: Bearer Token
Token: your_token_here
```

### Request Body

**JSON Body:**
```json
{
  "title": "Test Post",
  "content": "Post content",
  "status": "publish"
}
```

**Form Data:**
```
action: my_action
data: value
nonce: nonce123
```

**URL Encoded:**
```
title=Test Post&content=Post content
```

---

## 3. Saving Request Collections for Reuse

### Postman Collections

**Create Collection:**
1. Click "New" → "Collection"
2. Name collection
3. Add requests to collection
4. Organize with folders

**Collection Features:**
- Share with team
- Export/import
- Version control
- Documentation

**WordPress Collection Example:**
```
WordPress REST API
  ├── Posts
  │   ├── List Posts
  │   ├── Get Post
  │   ├── Create Post
  │   └── Update Post
  ├── Users
  │   ├── List Users
  │   └── Get Current User
  └── Media
      └── Upload Media
```

### Insomnia Workspaces

**Create Workspace:**
1. Click workspace dropdown
2. Create new workspace
3. Organize requests
4. Use folders

**Workspace Features:**
- Team collaboration
- Environment management
- Request organization
- Export/import

### Environment Variables

**Postman Environments:**
```json
{
  "base_url": "https://example.com",
  "api_token": "token123",
  "username": "admin"
}
```

**Use in Requests:**
```
{{base_url}}/wp-json/wp/v2/posts
Authorization: Bearer {{api_token}}
```

**Insomnia Environments:**
- Similar to Postman
- Environment variables
- Base URL configuration
- Token management

---

## 4. Testing WordPress Endpoints

### REST API Testing

**List Posts:**
```
GET {{base_url}}/wp-json/wp/v2/posts
```

**Create Post:**
```
POST {{base_url}}/wp-json/wp/v2/posts
Authorization: Basic Auth (username:application_password)
Content-Type: application/json
Body:
{
  "title": "New Post",
  "content": "Content",
  "status": "publish"
}
```

**Update Post:**
```
POST {{base_url}}/wp-json/wp/v2/posts/123
Authorization: Basic Auth
Body:
{
  "title": "Updated Title"
}
```

**Delete Post:**
```
DELETE {{base_url}}/wp-json/wp/v2/posts/123
Authorization: Basic Auth
```

### AJAX Testing

**AJAX Request:**
```
POST {{base_url}}/wp-admin/admin-ajax.php
Headers:
  X-WP-Nonce: {{nonce}}
  Cookie: {{cookie}}
Body (form-data):
  action: my_action
  data: value
```

### Authentication Testing

**Test Authentication:**
```
GET {{base_url}}/wp-json/wp/v2/users/me
Authorization: Basic Auth
```

**Check Response:**
- Status: 200 OK (authenticated)
- Status: 401 Unauthorized (not authenticated)

---

## 5. Advanced Features

### Pre-request Scripts

**Postman Pre-request:**
```javascript
// Generate nonce
pm.sendRequest({
    url: pm.environment.get("base_url") + "/wp-json/wp/v2",
    method: 'GET'
}, function (err, res) {
    const nonce = res.headers.get('X-WP-Nonce');
    pm.environment.set("nonce", nonce);
});
```

**Insomnia Plugins:**
- Similar functionality
- Custom scripts
- Request modification

### Tests and Assertions

**Postman Tests:**
```javascript
pm.test("Status code is 200", function () {
    pm.response.to.have.status(200);
});

pm.test("Response has posts", function () {
    var jsonData = pm.response.json();
    pm.expect(jsonData).to.be.an('array');
});
```

**Insomnia Tests:**
- Response validation
- Status code checks
- JSON schema validation

### Response Analysis

**View Response:**
- Pretty JSON formatting
- Syntax highlighting
- Response time
- Size information

**Save Responses:**
- Export responses
- Compare responses
- Save examples

---

## 6. Best Practices

### Organization

**Structure Collections:**
- Group by functionality
- Use descriptive names
- Add documentation
- Version control

### Security

**Protect Credentials:**
- Use environment variables
- Don't commit tokens
- Use secure storage
- Rotate credentials

### Documentation

**Document Requests:**
- Add descriptions
- Include examples
- Document parameters
- Note dependencies

---

## Exam Tips

### Key Points to Remember

1. **Graphical HTTP Clients:**
   - Postman and Insomnia
   - User-friendly interface
   - Visual request building
   - Response viewing

2. **Features:**
   - Custom headers
   - Authentication
   - Request body editing
   - Response analysis

3. **Collections:**
   - Organize requests
   - Share with team
   - Environment variables
   - Reusable requests

4. **WordPress Testing:**
   - REST API endpoints
   - AJAX requests
   - Authentication
   - Custom endpoints

5. **Best Practices:**
   - Use environment variables
   - Organize collections
   - Document requests
   - Protect credentials

---

## Additional Resources

- [Postman Documentation](https://learning.postman.com/)
- [Insomnia Documentation](https://docs.insomnia.rest/)
- [WordPress REST API Handbook](https://developer.wordpress.org/rest-api/)
- [Postman Collection Examples](https://www.postman.com/collection/)
